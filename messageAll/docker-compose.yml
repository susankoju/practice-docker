version: '3'
services:

        db:
                
                image: mysql:latest
                #build: ./database/
                environment:
                        MYSQL_ROOT_PASSWORD: root
                        MYSQL_DATABASE: messageAll
                        MYSQL_USER: user
                        MYSQL_PASSWORD: root  
                ports:
                        - "3306:3306"  
                expose:
                        - 3306
                command: --default-authentication-plugin=mysql_native_password
                restart: on-failure
                
                #entrypoint:
                #       - /bin/sh
                
        backend:
      
                build: ./back-end/
                ports:
                        - "4000:4000"
                restart: always
                expose:
                        - 4000
                depends_on:
                        - db
                             

        frontend:
      
                build:
                        context: ./front-end/
                ports: 
                        - "9898:80" 
                restart: on-failure 
                depends_on:
                        - backend    


